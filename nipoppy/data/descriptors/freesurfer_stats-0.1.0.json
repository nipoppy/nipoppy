{
    "name": "freesurfer_stats",
    "description": "FreeSurfer aseg/aparc stats extractor",
    "tool-version": "0.1.0",
    "schema-version": "0.5",
    "command-line": "[SCRIPT_PATH] [INPUT_DIR_PATH] [OUTPUT_FILE_PATH] [MODE] [CONTAINER] [ASEG_ARGS] [APARC_ARGS] [SUB_COLNAME] [SES_COLNAME] [SUB_PREFIX] [SES_PREFIX]",
    "inputs": [
        {
            "name": "script_path",
            "id": "script_path",
            "description": "Path to the script to run.",
            "type": "String",
            "optional": false,
            "value-key": "[SCRIPT_PATH]"
        },
        {
            "name": "input_dir_path",
            "id": "input_dir_path",
            "description": "Path to the input directory. Can be either a single FreeSurfer subjects directories (if \"--mode single\" is used) or a directory containing multiple FreeSurfer directories (if \"--mode multi\" is used).",
            "type": "String",
            "optional": false,
            "value-key": "[INPUT_DIR_PATH]"
        },
        {
            "name": "output_file_path",
            "id": "output_file_path",
            "description": "Path to the output TSV file.",
            "type": "String",
            "optional": false,
            "value-key": "[OUTPUT_FILE_PATH]"
        },
        {
            "name": "mode",
            "id": "mode",
            "description": "Whether to process a single FreeSurfer subjects directory or multiple directories (default: single).",
            "type": "String",
            "optional": true,
            "default-value": "single",
            "command-line-flag": "--mode",
            "value-key": "[MODE]",
            "value-choices": [
                "single",
                "multi"
            ]
        },
        {
            "name": "container",
            "id": "container",
            "description": "Container command and arguments (including image file), as a single string. This needs to contain everything needed to be able to run the FreeSurfer commands, for example \"apptainer exec --bind <INPUT_DIR_PATH> <IMAGE_FILE_PATH>\". Does not need to be specified if running on a system with FreeSurfer installed. IMPORTANT: only the Singularity/Apptainer container engine is explicitly supported because it allows for forwarding environment variables; this script might work with Docker containers but likely only with --mode single.",
            "type": "String",
            "optional": true,
            "command-line-flag": "--container",
            "value-key": "[CONTAINER]"
        },
        {
            "name": "aseg_args",
            "id": "aseg_args",
            "description": "Optional arguments to pass to asegstats2table, as a single string.",
            "type": "String",
            "optional": true,
            "command-line-flag": "--aseg-args",
            "value-key": "[ASEG_ARGS]"
        },
        {
            "name": "aparc_args",
            "id": "aparc_args",
            "description": "Optional arguments to pass to aparcstats2table, as a single string.",
            "type": "String",
            "optional": true,
            "command-line-flag": "--aparc-args",
            "value-key": "[APARC_ARGS]"
        },
        {
            "name": "sub_colname",
            "id": "sub_colname",
            "description": "Column name to use for the subject ID in the final output file (default: \"participant_id\").",
            "type": "String",
            "optional": true,
            "default-value": "participant_id",
            "command-line-flag": "--sub-colname",
            "value-key": "[SUB_COLNAME]"
        },
        {
            "name": "ses_colname",
            "id": "ses_colname",
            "description": "Column name to use for the session ID in the final output file (default: \"session_id\").",
            "type": "String",
            "optional": true,
            "default-value": "session_id",
            "command-line-flag": "--ses-colname",
            "value-key": "[SES_COLNAME]"
        },
        {
            "name": "sub_prefix",
            "id": "sub_prefix",
            "description": "Prefix to strip from the subject IDs in the final output file (default: \"sub-\"). Set as empty string to keep the original values.",
            "type": "String",
            "optional": true,
            "default-value": "sub-",
            "command-line-flag": "--sub-prefix",
            "value-key": "[SUB_PREFIX]"
        },
        {
            "name": "ses_prefix",
            "id": "ses_prefix",
            "description": "Prefix to strip from the session IDs in the final output file (default: \"ses-\"). Set as empty string to keep the original values.",
            "type": "String",
            "optional": true,
            "default-value": "ses-",
            "command-line-flag": "--ses-prefix",
            "value-key": "[SES_PREFIX]"
        }
    ],
    "tags": {},
    "suggested-resources": {
        "cpu-cores": 1,
        "ram": 1,
        "walltime-estimate": 60
    }
}
